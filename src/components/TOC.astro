---
import { generateToc } from "@/utils/generateToc";
import type { MarkdownHeading } from "astro";
import TOCHeading from "./TOCHeading.astro";

export interface Props {
  headings: MarkdownHeading[];
}

const { headings } = Astro.props;
const toc = generateToc(headings);
---

{
  toc.length > 0 && (
    <div class="border-line fixed right-0 top-1/2 hidden max-h-[80vh] max-w-[13%] -translate-y-1/2 transform flex-col items-center justify-start overflow-auto rounded-lg rounded-r-none border-2 border-r-0 p-4 lg:flex bg-background/85">
      <h2 class="text-accent text-lg underline decoration-dashed underline-offset-4">
        Contents Table
      </h2>
      <ul class="mt-4">
        {toc.map(heading => (
          <TOCHeading heading={heading} />
        ))}
      </ul>
    </div>
  )
}
